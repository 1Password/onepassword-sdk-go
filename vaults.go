// AUTOGENERATED - DO NOT EDIT MANUALLY
package onepassword

import (
	"context"
	"encoding/json"

	"github.com/1password/onepassword-sdk-go/internal"
)

// The Vaults API holds all the operations the SDK client can perform on 1Password vaults.
type VaultsAPI interface {
	// List all vaults
	ListAll(ctx context.Context) (*Iterator[VaultOverview], error)
}

type VaultsSource struct {
	internal.InnerClient
}

func NewVaultsSource(inner internal.InnerClient) *VaultsSource {
	return &VaultsSource{inner}
}

// List all vaults
func (s VaultsSource) ListAll(ctx context.Context) (*Iterator[VaultOverview], error) {
	resultString, err := clientInvoke(ctx, s.InnerClient, "VaultsListAll", map[string]interface{}{})
	if err != nil {
		return nil, err
	}
	var result []VaultOverview
	err = json.Unmarshal([]byte(*resultString), &result)
	if err != nil {
		return nil, err
	}
	return NewIterator(result), nil
}
